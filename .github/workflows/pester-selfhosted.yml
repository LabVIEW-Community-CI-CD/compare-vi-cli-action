name: Pester (self-hosted, real CLI)

on:
  workflow_dispatch:
    inputs:
      enable_run:
        description: 'Enable this workflow (deprecated; prefer orchestrated categories)'
        required: false
        default: 'false'
        type: choice
        options: ['false', 'true']
      include_integration:
        description: 'Include Integration-tagged tests (real CLI)'
        required: false
        default: 'true'
        type: choice
        options: ['true', 'false']
      sample_id:
        description: 'Sampling correlation id (prevents cancels)'
        required: false
        type: string

jobs:
  pester-selfhosted:
    if: ${{ inputs.enable_run == 'true' }}
    uses: ./.github/workflows/pester-reusable.yml
    with:
      include_integration: ${{ inputs.include_integration || 'true' }}
      install_pester: ${{ 'false' }}
      sample_id: ${{ inputs.sample_id }}
